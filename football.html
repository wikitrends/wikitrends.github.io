<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="shortcut icon" href="../img/favicon.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Visualizing 100 years of Football data (over 20,000 players) scraped from Wikipedia.">
    <meta name="author" content="Dhvanil Patel">
    <!--Facebook 
<div id="classtext"><span> You can find the raw data here: <a href="http://dhvanilpatel.com/viz/data.csv">data.csv</a></div>
Meta-data-->
    <meta property="og:title" content="Football Data Visualization" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="Visualization of over 140 years of Football data. Data from more than 22,000 international players was used to create series of beautiful visualizations." />
    <meta property="og:image" content="http://dhvanilpatel.com/img/football/cover-facebook.png" />
    <meta property="og:url" content="https://www.dhvanilpatel.com/portfolio/football.html" />
    <!--Twitter Meta-data-->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@dhvanilp">
    <meta name="twitter:creator" content="@dhvanilp">
    <meta name="twitter:image:src" content="http://dhvanilpatel.com/img/football/cover-twitter.png">
    <meta name="twitter:url" content="https://www.dhvanilpatel.com/portfolio/football.html">
    <meta name="twitter:title" content="Football Data Visualization">
    <meta name="twitter:description" content="Visualization of over 140 years of Football data. Data from more than 22,000 international players was used to create a series of beautiful visualizations.">
    <title>Football Data Visualization</title>
    <!-- Bootstrap Core CSS-->
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <!-- Fonts -->
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Noto+Serif:400,400italic' rel='stylesheet' type='text/css'>
    <!-- Custom Theme CSS -->
    <link href="../css/football.css" rel="stylesheet">
    <link href="../css/dropdown-enhancement.css" rel="stylesheet">
    <!--
<link href="../TEMP/bootstrap.min.css" rel="stylesheet">-->
</head>

<body>
    <script type="text/javascript">
    $(document).ready(function() {
        function fb_click() {
            var fbLink = $(this).attr('href');
            resizable = yes;
            window.open(fblink, 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');
        };
    })
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript">
    function fbs_click() {
        var twtTitle = document.title;
        var twtUrl = location.href;
        var maxLength = 140 - (twtUrl.length + 1);
        if (twtTitle.length > maxLength) {
            twtTitle = twtTitle.substr(0, (maxLength - 3)) + '...';
        }
        var twtLink = 'http://twitter.com/home?status=' + encodeURIComponent(twtTitle + ' ' + twtUrl + ' via @dhvanilp');
        window.open(twtLink, 'height=450', 'width=550', top = ' + ($(window).height() / 2 - 275) + ', left = ' + ($(window).width() / 2 - 225) + ');
    }
    </script>
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a class="nav-changed" href="../index.html#page-portfolio"><span>Portfolio</span></a></li>
                    <li><a class="nav-changed" href="../publications.html"><span>Publications</span></a></li>
                    <li><a class="nav-changed" target="_blank" href="../Dhvanil-Patel-Resume.pdf"><span>Résumé</span></a></li>
                    <li><a class="nav-changed" href="../about-me.html"><span>About Me</span></a></li>
                    <li><a class="nav-changed nav-last" href="../contact.html"><span>Contact</span></a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="portfolio-title">
            <h1 class="">Football Data Visualization</h1>
            <p class="portfolio-description">Visualizing 140 years of Football data (over 20,000 players) scraped from Wikipedia.</p>
        </div>
        <div class="row">
            <div class="col-md-10">
                <div class="portfolio-intro">
                    <p>This project focuses on visualizing the data of over 20,000 football players from around the world. Only the international career data is used in the project. Club football data is not used. Largely because it is very difficult to find data. Also, different leagues have different standards, so they can't be compared directly (for example, La Liga is obviously more competitive that say, Danish Superliga)</p>
                    <p>The script I wrote to scrape the data from Wikipedia can be found <a target="_blank" title="Source Code for WikiData Scraping" href="https://github.com/DhvanilPatel/WIkiScraper">here</a> I used Node.js for the script. I am planning to write a detailed blog post on the entire 'scraping' part of the project in near future.</p>
                    <p>The full dataset can be found <a target="_blank" title="Football DataSet" href="http://www.dhvanilpatel.com/viz/data.csv">here</a> The data is in CSV format. You are free to use it for any purposes.</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-9">
                <div class="portfolio-content">
                    <img class="img-rounded" src="../img/football/cover.jpg" alt="">
                    <div class="portfolio-content-text">
                        <p>Getting Football data is more difficult than you think. Unlike Basketball and American Football, data on Soccer is more sparse. Sure there are wonderful repositories of open-source data, like <a href="https://github.com/openfootball">football.db</a> but for the purpose of the project, I needed the birth locations of each and every player.</p>
                        <p>For this, it was necessary to scrape the data on my own. I used <a href="http://nodejs.org/">Node.js</a> for scraping. ExpressJS, Request and Cheerio frameworks were used. The source code which was used for scraping can be found <a href="https://github.com/DhvanilPatel/WIkiScraper">here</a></p>
                        <h4>ScatterPlot</h4>
                        <p></p>
                    </div>
                    
                    <div id="scatterplotbighuge" class="portfolio-content-text"></div>
                    <div class="portfolio-content-text">
                        <p>Below is the Geo Scatterplot of the birth places of South American players. The size of the bubble corresponds to the appearances made by the players.</p>
                        <div class="classtwo" style="padding-left: 20px; padding-top: 10px;">
                            <ul style="list-style-type: none">
                                <li>
                                    <p><span style="background-color: #e74c3c;color: #e74c3c">BLN</span>&nbsp;&nbsp;&nbsp;Forward players are colored red</p>
                                </li>
                                <li>
                                    <p><span style="background-color: #2ecc71; color: #2ecc71">BLN</span>&nbsp;&nbsp;&nbsp;Midfielders are colored green</p>
                                </li>
                                <li>
                                    <p><span style="background-color: #f1c40f; color: #f1c40f">BLN</span>&nbsp;&nbsp;&nbsp;Defenders are colored yellow</p>
                                </li>
                                <li>
                                    <p><span style="background-color: #3498db; color: #3498db">BLN</span>&nbsp;&nbsp;&nbsp;Goalkeepers are colored blue</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div id="loader_container"></div>
                    <div class="nestedInput">
                    </div>
                    <div id="loader_container"></div>
                    <div class="loaderContainer1" style="display: block"></div>
                    <div class="geo-latinamerica">
                        <div class="inline" id="latinamerica1">
                            <p class="small-text">Forward Players</p>
                        </div>
                        <div class="inline" id="latinamerica2">
                            <p class="small-text">Midfield Players</p>
                        </div>
                        <div class="inline" id="latinamerica3">
                            <p class="small-text">Defense Players</p>
                        </div>
                        <div class="inline" id="latinamerica4">
                            <p class="small-text">Goalkeepers</p>
                        </div>
                    </div>
                    <div class="portfolio-content-text">
                        <p>To analyse what factors might influence the the birth locations of the football players, or rather why the the density of football players is more in certain areas then it is in other, I tried to correlate it with a variety of other parameters.</p>
                        <ol>
                            <li><a href="http://en.wikipedia.org/wiki/List_of_Latin_American_cities_by_population">Population</a> of the area will definitely be an influencial factor.</li>
                            <li>Another important factor could be <a href="http://en.wikipedia.org/wiki/List_of_cities_by_GDP">Economic conditions</a> of the geographical area. To what extend it influences the player geo-density needs to be calculated. But it is definitely sure that economic condition is one of the important factor.</li>
                            <li>Football popularity would naturally be an important factor to consider. <a href="http://sites.duke.edu/wcwp/research-projects/politics-and-sport-in-latin-america/">Politics</a> could also play an important role. However, there are two problems with it. One: Penetration is a highly subjective term. Two: Continent wide data for the same is very difficult to get.</li>
                            <li>Other miscellaneous factors like climate / elevation of the location could also play a minor role</li>
                        </ol>
                        <p>Below is where I've compared the football players' distribution across the continent with some of the data shown above. A lot of data is difficult to get for city/admistrative level, but i've tried my best to compare them. This data can be found <a href="">here</a> </p>
                    </div>
                    <div class="portfolio-content-text">
                        <div class="col-md-6" style="border-right: #ddd 1px solid; padding-top: 30px;">
                            <div class="inline">
                                <p class="small-text"><strong>All South American Players</strong>. Size of the
                                    <br>bubbles is proportional to Appearances</p>
                                <img src="../img/football/latin-america-all-players.jpg">
                            </div>
                        </div>
                        <div class="col-md-6 carousel" style="padding-top: 30px;">
                            <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="item active">
                                        <div class="inline">
                                            <p class="small-text"><strong>Population</strong> of various South American Cities
                                                <br>Data from Wikipedia</p>
                                            <img src="../img/football/latin-america-population.jpg">
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="inline">
                                            <p class="small-text"><strong>Elevation ScatterPlot</strong> of South American
                                                <br>cities based on Wikipedia Data</p>
                                            <img src="../img/football/latin-america-elevation.jpg">
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="inline">
                                            <p class="small-text"><strong>Purchasing Power Parity</strong> of different
                                                <br>cities in South America</p>
                                            <img src="../img/football/latin-america-gdp.jpg">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                                <span class="glyphicon glyphicon-chevron-left"></span>
                            </a>
                            <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                                <span class="glyphicon glyphicon-chevron-right"></span>
                            </a>
                        </div>
                    </div>7
                    <div class="portfolio-content-text" style="margin-top: 50px;">
                        <h4>European Geo-ScatterPlot</h4>
                        <p>Geo Scatter plot of the continent where Football was born. Each dot represents the birth location of the player. The size of the bubbles are proportional to their appearances. The exact dimensions are: radius = Appearances*0.12px.</p>
                        <p>Since the dataset is quite large, the visualization script for Europe is slow (somewhat!) Also, another point to be noted is that the map of Turkey isn't shown here. This leads to weird situation where all the players of Turkey appear to be born in sea. I'll fix this as soon as I find a better European Union GeoJSON map.</p>
                    </div>
                    <div style="height: 730px" class="portfolio-content-text">
                        <div style="margin-left: -50px" class="col-md-8">
                            <div class="inline" id="europefull"></div>
                        </div>
                        <div class="col-md-4">
                            <div class="EuropeScatterPlot">
                                <div class="positionSelector">
                                    <form id="positionSelector">
                                        <div class="radiodropdown">
                                            <div style="margin-left: 40px; margin-top: 36px;" class="bubblePlayerPosition">
                                                <p class="small-text" style="padding-bottom: 50px;">Select Player Position: </p>
                                                <ul style="display: inline-block;" class="nav nav-pills" id="positionSelectorPlayer">
                                                    <li>
                                                        <label style="background-color : #428bca; color : #fff">
                                                            <input type="radio" name="position" value="All" checked>All Positions</label>
                                                    </li>
                                                    <li>
                                                        <label>
                                                            <input type="radio" name="position" value="Forward">Forward</label>
                                                    </li>
                                                    <li>
                                                        <label>
                                                            <input type="radio" name="position" value="Midfielder">Midfielder</label>
                                                    </li>
                                                    <li>
                                                        <label>
                                                            <input type="radio" name="position" value="Defender">Defender</label>
                                                    </li>
                                                    <li>
                                                        <label>
                                                            <input type="radio" name="position" value="Goalkeeper">Goalkeeper</label>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <!--
                      <label><input type="radio" name="position" value="All" checked> All Positions<br><span>Select all international players from Europe (Forwards, Defenders, Midfielders and Goalkeepers)</span></label>
                      <label><input type="radio" name="position" value="Forward" > Forward<br><span>Select all international Forward players from Europe.</span></label>
                      <label><input type="radio" name="position" value="Midfielder" > Midfielder<br><span>Select all international Midfielders from Europe.</span></label>
                      <label><input type="radio" name="position" value="Defender" > Defender<br><span>Select all international Defense players from Europe.</span></label>
                      <label><input type="radio" name="position" value="Goalkeeper" > Goalkeeper<br><span>Select all international Goalkeepers from Europe.</span></label>-->
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="portfolio-content-text">
                        <p>As you can see, most of the football players are concentrated in the central European regions. There is stark regionalized difference in the distribution of Football players in many countries like France/Scandalavian countries.</p>
                    </div>
                    <div style="height: 730px" class="portfolio-content-text">
                        <div style="margin-left: -50px" class="col-md-8">
                            <div class="inline" id="europemap1"></div>
                        </div>
                        <div class="col-md-4">
                            <div class="sideCaption">
                                <div style="float: left;width:250px;margin-left: 80px;">
                                    <p class="small-text" style="margin-top: 36px;border-bottom: #eee solid 1px;padding-bottom: 10px;"><strong>European Football Players by nationality</strong></p>
                                    <p class="small-text">The players are color coded according to their countries. 34 countries (erstwhile countries are also counted) are included in this Geo-Scatter plot. Hover over the player bubbles to know which country they played for.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="portfolio-content-text">
                        <p>Europe has had a very colourful history over the past decades. The territorial boundaries have changed a lot since World War 1. Hence, the distribution of Football players is not uniform.</p>
                        <p>Although, the boundaries shown are correct as they stand today, there are couple of other points to be noted:
                            <p>
                                <ol>
                                    <li>West German Football team has not been included in the plot. There were only 26 West German players for the entire Cold War period compared to 161 <a href="http://en.wikipedia.org/wiki/List_of_East_Germany_international_footballers">East German players</a></li>
                                    <li>I've included <a href="http://en.wikipedia.org/wiki/Soviet_Union_national_football_team">Soviet Union</a> too, along with its present day successor states. This was because there was a large discontinuity in dataset otherwise.</li>
                                    <li>Turkey has not been included in this map.</li>
                                </ol>
                    </div>
                    <div class="portfolio-content-text">
                        <h4>Geo-projection over the years</h4>
                        <p>Birthplaces of Football players over the years. The data from the year 1871 was available, when the game was first played in England. Since then, it has propogated to nearly all the corners of the world.</p>
                        <p>These timelapses roughly depict the propogation of the game of Football over the last century. Europe and South America are the continents where the game became popular first, and then it is slowly adopted by Asian and African countries.</p>
                        <p>Below is the Geo-bubble chart of European continent. Press 'Run' to play the visualization:</p>
                    </div>
                    <div style="height: 730px" class="portfolio-content-text">
                        <div style="margin-left: -50px" class="col-md-8">
                            <div class="inline" id="europemaptime"></div>
                        </div>
                        <div class="col-md-4">
                            <div class="sideCaption">
                                <div style="float: left;width:250px;margin-left: 80px;margin-top: 70px">
                                    <p class="small-text" id="timer1" style="font-size: 90px">1871</p>
                                    <div class="buttonFormat">
                                        <input type='button' id='europeMapRun' value='Run' class="btn"></input>
                                        <input type='button' id='europeMapReset' value='Reset' class="btn"></input>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="portfolio-content-text">
                        <p>Below is the geo-bubble chart for the birthplaces of International Football players of more than 60 countries since the past 140 years. Press 'Run' to play the visualization:</p>
                    </div>
                    <div style="height: 600px" class="portfolio-content-text">
                        <div style="margin-left: -50px" class="col-md-8">
                            <div class="inline" style="margin-left: -100px" id="worldmaptime"></div>
                        </div>
                        <div class="col-md-4">
                            <div class="sideCaption">
                                <div style="float: left;width:250px;margin-left: 80px;margin-top: 40px">
                                    <p class="small-text" id="timer" style="font-size: 90px">1871</p>
                                    <div class="buttonFormat">
                                        <input type='button' id='worldMapRun' value='Run' class="btn"></input>
                                        <input type='button' id='worldMapReset' value='Reset' class="btn"></input>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="portfolio-content-text">
                        <h4>Bar Chart</h4>
                        <p>The year the player played in is depicted by the x-axis and his height represents the height of the rectangle. Width of individual rectangle is kept constant at 30px.</p>
                        <p>This chart is not entirely accurate. There are two reasons for it:</p>
                        <ol>
                            <li>Firstly, the MeanYear calculated for each player is simple the average of the international career of the player. For example, Raúl played for Spain between 1996 and 2006. His mean year will be 2001. The width of the bar does not represent his career span, it is simple constant at 30px cantered around his mean year of international career. </li>
                            <li>Another reason is that the opacity of the rectangles has been kept at 50% (in case of individual country) or 19% (in case of the entire world) This is done purely for visual reasons. An important point to be considered here is that it leads to a skewed inference when the rectangles increase. The lower heighted rectangles would be difficult to see when the rectangles are highly concentrated.</li>
                        </ol>
                    </div>
                    <div class="portfolio-content-text">
                        <div class "col-md-12">
                            <div class="col-md-9">
                                <div style="" class="bubblePlayerPosition">
                                    <p class="small-text">Select Player Position: </p>
                                    <ul style="display: inline-block;" class="nav nav-pills" id="positionBarChartSelector">
                                        <li>
                                            <label>
                                                <input type="radio" name="positionBarChart" value="All" checked>All Positions</label>
                                        </li>
                                        <li>
                                            <label>
                                                <input type="radio" name="positionBarChart" value="Forward">Forward</label>
                                        </li>
                                        <li>
                                            <label>
                                                <input type="radio" name="positionBarChart" value="Midfielder">Midfielder</label>
                                        </li>
                                        <li>
                                            <label style="background-color : #428bca; color : #fff">
                                                <input type="radio" name="positionBarChart" value="Defender">Defender</label>
                                        </li>
                                        <li>
                                            <label>
                                                <input type="radio" name="positionBarChart" value="Goalkeeper">Goalkeeper</label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <p class="small-text" style="padding-top: 5px">Select country: </p>
                                <div class="btn-group">
                                    <button data-toggle="dropdown" class="btn btn-default dropdown-toggle">Germany <span class="caret"></span></button>
                                    <ul class="dropdown-menu bullet" id="countrySelectorBarChart">
                                        <li>
                                            <input type="radio" id="aAll" name="countryBarChart" value="All">
                                            <label for="aAll"> All Countries</label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aNetherlands" name="countryBarChart" value="Netherlands">
                                            <label for="aNetherlands"> Netherlands </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aGermany" name="countryBarChart" value="Germany" checked>
                                            <label for="aGermany"> Germany </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aArgentina" name="countryBarChart" value="Argentina">
                                            <label for="aArgentina"> Argentina </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aSpain" name="countryBarChart" value="Spain">
                                            <label for="aSpain"> Spain </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aEngland" name="countryBarChart" value="England">
                                            <label for="aEngland"> England </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aScotland" name="countryBarChart" value="Scotland">
                                            <label for="aScotland"> Scotland </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aBrazil" name="countryBarChart" value="Brazil">
                                            <label for="aBrazil"> Brazil </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aSweden" name="countryBarChart" value="Sweden">
                                            <label for="aSweden"> Sweden </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aChile" name="countryBarChart" value="Chile">
                                            <label for="aChile"> Chile </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aBelgium" name="countryBarChart" value="Belgium">
                                            <label for="aBelgium"> Belgium </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aCroatia" name="countryBarChart" value="Croatia">
                                            <label for="aCroatia"> Croatia </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aMexico" name="countryBarChart" value="Mexico">
                                            <label for="aMexico"> Mexico </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aIran" name="countryBarChart" value="Iran">
                                            <label for="aIran"> Iran </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aNorway" name="countryBarChart" value="Norway">
                                            <label for="aNorway"> Norway </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aPortugal" name="countryBarChart" value="Portugal">
                                            <label for="aPortugal"> Portugal </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aFinland" name="countryBarChart" value="Finland">
                                            <label for="aFinland"> Finland </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aDenmark" name="countryBarChart" value="Denmark">
                                            <label for="aDenmark"> Denmark </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aItaly" name="countryBarChart" value="Italy">
                                            <label for="aItaly"> Italy </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aNigeria" name="countryBarChart" value="Nigeria">
                                            <label for="aNigeria"> Nigeria </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aParaguay" name="countryBarChart" value="Paraguay">
                                            <label for="aParaguay"> Paraguay </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aSwitzerland" name="countryBarChart" value="Switzerland">
                                            <label for="aSwitzerland"> Switzerland </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aRussia" name="countryBarChart" value="Russia">
                                            <label for="aRussia"> Russia </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aUruguay" name="countryBarChart" value="Uruguay">
                                            <label for="aUruguay"> Uruguay </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aHungary" name="countryBarChart" value="Hungary">
                                            <label for="aHungary"> Hungary </label>
                                        </li>
                                        <li>
                                            <input type="radio" id="aJapan" name="countryBarChart" value="Japan">
                                            <label for="aJapan"> Japan </label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div id="line"></div>
                    </div>
                    <div class="portfolio-content-text">
                        <p>Nevertheless, the bar chart shown is quite accurate in depicting the trends since the past 100 or so years (I'd calculated the rate of increase of height using R)</p>
                    </div>
                    <div class="portfolio-content-text">
                        <h4>Overseas Players</h4>
                        <p>Since I had the birthplace coordinates of each and every players, I could chart out the world map and plot the birth coordinates of a players of a particular country and find out who / how many players were born overseas. Once again, the size of the bubbles is kept proportional to the Appearances to give it a weighted emphasis.</p>
                        <p>Below is the birthplace scatterplot of international players who have played for any of the South America's football teams. In total of 16 South American football players were born ovreseas. There was no particular pattern for the results.</p>
                    </div>
                    <div style="height: 600px" class="portfolio-content-text">
                        <div style="margin-left: -50px" class="col-md-8">
                            <div class="inline" style="margin-left: -100px" id="worldmap"></div>
                        </div>
                        <div class="col-md-4">
                            <div class="sideCaption">
                                <div style="float: left;width:250px;margin-left: 80px;">
                                    <p class="small-text" style="margin-top: 36px;border-bottom: #eee solid 1px;padding-bottom: 10px;"><strong>South American Football Players</strong></p>
                                    <p class="small-text">Birthlocations of South American players, visualized in a geo-scatterplot. Opacity of each bubble is: 50% and its size is (Appearances*0.15)px Players playing at all positions (Forward, Defense etc) are considered.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="portfolio-content-text">
                        <p>In contrast to South American international players, European players have been born in a lot of overseas locations. It is evident from the map plotted below. Total of 62 European football players were born overseas.</p>
                        <p>A large number of players were born in erstwhile South American and African colonies of imperialist countries. Spain, Portugal and France lead the numbers with 17, 11 and 19 players born overseas respectively.</p>
                    </div>
                    <div style="height: 600px" class="portfolio-content-text">
                        <div style="margin-left: -50px" class="col-md-8">
                            <div class="inline" style="margin-left: -100px" id="worldmap2"></div>
                        </div>
                        <div class="col-md-4">
                            <div class="sideCaption">
                                <div style="float: left;width:250px;margin-left: 80px;">
                                    <p class="small-text" style="margin-top: 36px;border-bottom: #eee solid 1px;padding-bottom: 10px;"><strong>European Football Players</strong></p>
                                    <p class="small-text">Birthlocations of European players, visualized in a geo-scatterplot. Opacity of each bubble is: 50% and its size is (Appearances*0.12)px Players playing at all positions (Forward, Defense etc) are considered.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="portfolio-content-text">
                        <p>The full dataset which was scraped for this project can be found <a target="_blank" title="Football DataSet" href="http://www.dhvanilpatel.com/viz/data.csv">here</a> The data is in CSV format. You are free to use it for any purposes.</p>
                        <p>For visualization purposes, a JavaScript visualization library: <a target="_blank" title="d3.js link" href="http://d3js.org/">d3.js</a> has been used. I will document and upload the JS code once the project is completed.</p>
                        <p>I will be adding more visualizations to this project very soon. Please check back again.</p>
                    </div>
                    <div class="portfolio-content-text">
                        <div class="ending-share">
                            <div class="social-icons">
                                <a class="left-padding btn btn-round btn-clear btn-twitter" style="margin-left: 3px;" href="#" onclick="fbs_click();"><i class="fa fa-twitter"></i></a>
                                <a onclick="fb_click();" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.dhvanilpatel.com/portfolio/football.html" target="_blank" class="left-padding fb-share btn btn-round btn-clear btn-facebook" style="margin-left: 3px;"><i class="fa fa-facebook"></i></a>
                                <a onclick="javascript:window.open('http://example.com','','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" href="https://plus.google.com/share?url=http://www.dhvanilpatel.com/portfolio/football.html" class="left-padding btn btn-round btn-clear btn-google" style="margin-left: 3px;">
                                    <i class="fa fa-google-plus"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="side-bar">
                    <h4>Project Summary</h4>
                    <p>Visualization of over 140 years of Football data.</p>
                    <h4>Duration</h4>
                    <p>August to October 2014</p>
                    <h4>Project Tags</h4>
                    <p>Data Visualization, Data Analysis, Web Scraping</p>
                    <div class="magic">
                        <h4>Share</h4>
                        <div class="social-icons">
                            <a class="left-padding btn btn-round btn-clear btn-twitter" style="margin-left: 3px;" href="#" onclick="fbs_click();"><i class="fa fa-twitter"></i></a>
                            <a onclick="fb_click();" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.dhvanilpatel.com/portfolio/football.html" target="_blank" class="left-padding fb-share btn btn-round btn-clear btn-facebook" style="margin-left: 3px;"><i class="fa fa-facebook"></i></a>
                            <a onclick="javascript:window.open('http://example.com','','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" href="https://plus.google.com/share?url=http://www.dhvanilpatel.com/portfolio/football.html" class="left-padding btn btn-round btn-clear btn-google" style="margin-left: 3px;">
                                <i class="fa fa-google-plus"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <section class="grey_area">
        <div class="container ender">
            <div class="row">
                <div class="center width-sixty-five">
                    <p>Follow on <a href="https://twitter.com/dhvanilp"> @dhvanilp</a> or <a href="https://www.facebook.com/dhvanil.patel.1?ref=tn_tnmn">facebook</a></p>
                </div>
            </div>
        </div>
    </section>
    <!-- Core JavaScript Files -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <!--<script type="text/javascript" src="../TEMP/bootstrap.min.js"></script>-->
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="../js/jquery.bootstrap-autohidingnavbar.js"></script>
    <script>
    $("div.navbar-fixed-top").autoHidingNavbar();
    </script>
    <script type="text/javascript" src="../js/dropdown-enhancement.js"></script>
    <script src="../js/football.js"></script>
    <script>
    $(document).ready(function() {
        $('.nav-changed').hover(
            function() {
                $(this).children('span').css('border-bottom', '#333 1px solid');
            },
            function() {
                $(this).children('span').css('border-bottom', '');
            }
        )
    })
    </script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <script>
    var All = [0, 16376]
    var Argentina = [0, 644]
    var Austria = [645, 981]
    var Belgium = [982, 1301]
    var Brazil = [1302, 1813]
    var Cameroon = [1814, 2010]
    var Chile = [2011, 2338]
    var Colombia = [2339, 2576]
    var CostaRica = [2577, 2765]
    var Croatia = [2766, 2987]
    var CzechRepublic = [2988, 3181]
    var Denmark = [3182, 3500]
    var EastGermany = [3501, 3656]
    var Ecuador = [3657, 3807]
    var England = [3808, 4861]
    var Estonia = [4862, 5003]
    var France = [5004, 5540]
    var Germany = [5541, 6150]
    var Ghana = [6151, 6364]
    var Greece = [6365, 6588]
    var Honduras = [6589, 6813]
    var Hungary = [6814, 7248]
    var Iran = [7249, 7532]
    var Israel = [7533, 7714]
    var Italy = [7715, 8284]
    var IvoryCoast = [8285, 8415]
    var Japan = [8416, 8925]
    var Luxembourg = [8926, 8991]
    var Mexico = [8992, 9365]
    var Netherlands = [9366, 9785]
    var NewZealand = [9786, 10186]
    var Nigeria = [10187, 10451]
    var NorthernIreland = [10452, 10700]
    var Paraguay = [10701, 11000]
    var Poland = [11001, 11416]
    var Portugal = [11417, 11961]
    var Romania = [11962, 12379]
    var Russia = [12380, 12591]
    var Scotland = [12592, 13376]
    var Serbia = [13377, 13490]
    var Slovenia = [13491, 13624]
    var SouthKorea = [13625, 13929]
    var SovietUnion = [13930, 14302]
    var Spain = [14303, 14819]
    var Sweden = [14820, 15203]
    var Switzerland = [15204, 15427]
    var Turkey = [15428, 15706]
    var Ukraine = [15707, 15904]
    var Uruguay = [15905, 16265]
    var India = [16266, 16376]
    var UnitedStates = [16377, 16967]
    var Canada = [163968, 17211]
    var Australia = [17212, 17486]
    var SouthAfrica = [17487, 17772]
    var Czechoslovakia = [177773, 18024]
    var Peru = [18025, 18285]
    var Pakistan = [18400, 18473]
    var Qatar = [18474, 18569]
    var MonteNegro = [18569, 18636]
    var Venezuela = [18637, 18754]
    var Egypt = [18755, 18992]
    var Algeria = [18993, 19263]
    var SaudiArabia = [19649, 19767]
    var China = [19768, 20016]
    var Finland = [20017, 20215]
    var Norway = [20215, 20506]

    function loader(config) {
        return function() {
            var radius = Math.min(config.width, config.height) / 2;
            var tau = 2 * Math.PI;

            var arc = d3.svg.arc()
                .innerRadius(radius * 0.2)
                .outerRadius(radius * 0.4)
                .startAngle(0);

            var svg = d3.select(config.container).append("svg")
                .attr("id", config.id)
                .attr("width", config.width)
                .attr("height", config.height)
                .append("g")
                .attr("transform", "translate(" + config.width / 2 + "," + config.height / 2 + ")")

            var background = svg.append("path")
                .datum({
                    endAngle: 0.33 * tau
                })
                .style("fill", "#4D4D4D")
                .attr("d", arc)
                .call(spin, 1500)

            function spin(selection, duration) {
                selection.transition()
                    .ease("linear")
                    .duration(duration)
                    .attrTween("transform", function() {
                        return d3.interpolateString("rotate(0)", "rotate(360)");
                    });

                setTimeout(function() {
                    spin(selection, duration);
                }, duration);
            }

            function transitionFunction(path) {
                path.transition()
                    .duration(7500)
                    .attrTween("stroke-dasharray", tweenDash)
                    .each("end", function() {
                        d3.select(this).call(transition);
                    });
            }

        };
    }

    var myLoader = loader({
        width: 960,
        height: 500,
        container: "#loader_container",
        id: "loader"
    });
    myLoader();

    var myLoader = loader({
        width: 960,
        height: 500,
        container: ".loaderContainer1",
        id: "loader"
    });
    myLoader();

    // load data
    d3.csv("../viz/data.csv", function(error, data) {

        function chart(idname) {

            var margin = {
                    top: 20,
                    right: 20,
                    bottom: 30,
                    left: 80
                },
                width = 860 - margin.left - margin.right,
                height = 400 - margin.top - margin.bottom;

            // setup x 
            var xValue = function(d) {
                    return d.Height;
                }, // data -> value
                xScale = d3.scale.linear().range([0, width]), // value -> display
                xMap = function(d) {
                    return xScale(xValue(d));
                }, // data -> display
                xAxis = d3.svg.axis().scale(xScale).orient("bottom");

            // setup y
            var yValue = function(d) {
                    return d.MeanYear;
                }, // data -> value
                yScale = d3.scale.linear().range([height, 0]), // value -> display
                yMap = function(d) {
                    return yScale(yValue(d));
                }, // data -> display
                yAxis = d3.svg.axis().scale(yScale).orient("left");

            // add the graph canvas to the body of the webpage
            var svg = d3.select("body").select(idname).append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            var tip = d3.tip()
                .attr('class', 'd3-tip')
                .offset([-10, 0])
                .html(function(d) {
                    return "<span style='color:white'>" + d.PlayerName + " " + "<br/> Height: " + d.Height + "<br>MeanYear: " + d.MeanYear + "<br>Goals: " + d.Goals + "<br>Appearances: " + d.Appearances + "</span>";
                })

            // add the tooltip area to the webpage
            var tooltip = d3.select("body").select(idname).append("div")
                .attr("class", "tooltip")

            function svgDotsRemove() {
                svg.selectAll(".dot").remove()
            }

            // don't want dots overlapping axis, so add in buffer to data domain
            xScale.domain([1.62, 2.03]);
            yScale.domain([1930, 2025]);
            //xScale.domain([d3.min(data, xValue), d3.max(data, xValue)+1]);
            //yScale.domain([d3.min(data, yValue), d3.max(data, yValue)+1]);

            // x-axis
            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis)
                .append("text")
                .attr("class", "label")
                .attr("x", width)
                .attr("y", -6)
                .style("text-anchor", "end")
                .text("Height (in meters)");

            // y-axis
            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis)
                .append("text")
                .attr("class", "label")
                .attr("transform", "rotate(-90)")
                .attr("y", 6)
                .attr("dy", ".71em")
                .style("text-anchor", "end")
                .style("color", "#gg00aa")
                .text("Mean Year");

            var count = 0;

            // draw dots

            function scatterPlot(bubbleSize, bubbleCountry, bubbleForward, bubbleMidfielder, bubbleDefender, bubbleGoalkeeper) {

                svg.call(tip);

                svg.selectAll(".dot")
                    .data(function() {
                        return data.slice(bubbleCountry[0], bubbleCountry[1])
                    })
                    .enter().append("circle")
                    .attr("class", "dot")
                    .attr("r", function(d) {
                        if (bubbleSize == "Appearances") {
                            return Math.sqrt((d.Appearances) * 5.5)
                        } else if (bubbleSize == "Combined" && d.Position == "Forward") {
                            return (d.Goals) * 0.7
                        } else if (bubbleSize == "Goals per match" && d.Appearances > 15) {
                            return Math.sqrt((d.Goals / d.Appearances) * 800)
                        } else if (bubbleSize == "None") {
                            return 12
                        } else if (bubbleSize == "Goals") {
                            return Math.sqrt((d.Goals) * 10)
                        } else {
                            return (d.Appearances) * 0.25
                        }
                    })
                    .attr("opacity", 0.675)
                    .attr("cx", xMap)
                    .style("fill", function(d) {
                        bubbleCountry = String(bubbleCountry)
                        if (d.Position == bubbleGoalkeeper) {
                            return "#3498db"
                        } else if (d.Position == bubbleForward) {
                            return "#e74c3c"
                        } else if (d.Position == bubbleMidfielder) {
                            return "#2ecc71"
                        } else {
                            return "#f1c40f"
                        }
                    })
                    .attr("cy", yMap)
                    .on("mouseover", tip.show)
                    .on("mouseout", tip.hide);
            }

            scatterPlot("Appearances", Germany, "Forward", "Midfielder", "Defender", "Goalkeeper");

            // draw legend
            //var legend = svg.selectAll(".legend")
            //    .data(data)
            //  .enter().append("g")
            //    .attr("class", "legend")
            //.attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

            // draw legend colored rectangles
            //legend.append("rect")
            //    .attr("x", width - 18)
            //    .attr("width", 18)
            //    .attr("height", 18)
            //   .style("fill", color);

            // draw legend text
            //legend.append("text")
            //    .attr("x", width - 24)
            //    .attr("y", 9)
            //    .attr("dy", ".35em")
            //    .style("text-anchor", "end")
            //    .text("Country")

            d3.select("#countrySelector").selectAll("input")
                .on("change", countryChange);

            d3.select("#sizeSelector").selectAll("input")
                .on("change", sizeChange);

            var valueCountry;
            var valueSize;

            function countryChange() {
                valueCountry = eval(this.value);

                var radios = document.getElementsByName('size');

                for (var i = 0, length = radios.length; i < length; i++) {
                    if (radios[i].checked) {
                        // do whatever you want with the checked radio
                        svgDotsRemove();
                        scatterPlot(radios[i].value, valueCountry, "Forward", "Midfielder", "Defender", "Goalkeeper");

                        // only one radio can be logically checked, don't check the rest
                        break;
                    }
                }

            }

            function sizeChange() {
                valueSize = this.value;

                var radios = document.getElementsByName('country');

                for (var i = 0, length = radios.length; i < length; i++) {
                    if (radios[i].checked) {

                        svgDotsRemove();
                        scatterPlot(valueSize, eval(radios[i].value), "Forward", "Midfielder", "Defender", "Goalkeeper");
                        // only one radio can be logically checked, don't check the rest
                        break;
                    }
                }
            }

        }

        var scatterplotbighuge = "#scatterplotbighuge";

        chart(scatterplotbighuge);

    })
    </script>
    <script type="text/javascript">
    var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
            return "<span style='color:white'>" + "PlayerName: " + d.PlayerName + "<br>BirthPlace: " + d.BirthPlace + "<br>Country: " + d.Country /*+ "<br>Goals: " + d.Goals + "<br>Appearances: " + d.Appearances +"</span>";*/
        })

    d3.json("../viz/latinamerica.json", function(error, map) {

        d3.select("body").select('.loaderContainer1').remove();

        function latin(idname, bubbleSize, bubbleForward, bubbleMidfielder, bubbleDefender, bubbleGoalkeeper) {

            var width = 290,
                height = 418;

            var projection = d3.geo.mercator()
                .scale(348)
                .translate([width / 2, height / 2])
                .rotate([58.4667, 0])
                .center([0, -17.8500])

            var svg = d3.select("body").select(idname).append("svg")
                .attr("width", width)
                .attr("height", height);

            var g = svg.append("g");

            g.append("path")
                .datum(topojson.feature(map, map.objects.layer1))
                .attr("d", d3.geo.path().projection(projection));

            svg.call(tip);

            // load and display the cities
            d3.csv("../viz/latin-america-data.csv", function(error, data) {
                g.selectAll("circle")
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function(d) {
                        return projection([d.Longitude, d.Latitude])[0];
                    })
                    .attr("cy", function(d) {
                        return projection([d.Longitude, d.Latitude])[1];
                    })
                    .attr("r", function(d) {
                        if (bubbleSize == "Appearances") {
                            return (d.Appearances * 0.12)
                        } else if (bubbleSize == "Goals") {
                            return (d.Goals * 0.3)
                        }
                    })
                    .attr("fill", function(d) {
                        if (d.Position == bubbleForward) {
                            return "#e74c3c"
                        } else if (d.Position == bubbleMidfielder) {
                            return "#2ecc71"
                        } else if (d.Position == bubbleDefender) {
                            return "#f1c40f"
                        } else if (d.Position == bubbleGoalkeeper) {
                            return "#3498db"
                        }
                    })
                    .attr("opacity", 0.7)
                    .attr("visibility", function(d) {
                        if (d.Position == bubbleForward) {
                            return ""
                        } else if (d.Position == bubbleMidfielder) {
                            return ""
                        } else if (d.Position == bubbleDefender) {
                            return ""
                        } else if (d.Position == bubbleGoalkeeper) {
                            return ""
                        } else {
                            return "hidden"
                        }
                    })
                    .on("mouseover", tip.show)
                    .on("mouseout", tip.hide);

                /*// zoom and pan
                var zoom = d3.behavior.zoom()
                    .on("zoom",function() {
                        g.attr("transform","translate("+ 
                            d3.event.translate.join(",")+")scale("+d3.event.scale+")");
                        g.selectAll("circle")
                            .attr("d", path.projection(projection));
                        g.selectAll("path")  
                            .attr("d", path.projection(projection)); 

                    });

                svg.call(zoom)
    
                */

            });

        }

        latin("#latinamerica1", "Appearances", "Forward", null, null, null);
        latin("#latinamerica2", "Appearances", null, "Midfielder", null, null);
        latin("#latinamerica3", "Appearances", null, null, "Defender", null);
        latin("#latinamerica4", "Appearances", null, null, null, "Goalkeeper");

        latin("#latinamerica5", "Appearances", "Forward", "Midfielder", "Defender", "Goalkeeper");

    })

    d3.json("../viz/europe.json", function(error, map) {

        d3.select("body").select('.loaderContainer1').remove();

        var width = 900,
            height = 730;

        var projection = d3.geo.albers()
            .scale(1100)
            .translate([width / 2, height / 2])
            .rotate([-17.0333, 0])
            .center([0, 51.1167])

        var svg = d3.select("body").select("#europefull").append("svg")
            .attr("width", width)
            .attr("height", height);

        var g = svg.append("g");

        g.append("path")
            .datum(topojson.feature(map, map.objects.layer1))
            .attr("d", d3.geo.path().projection(projection));

        svg.call(tip);

        // load and display the cities
        d3.csv("../viz/europe-data.csv", function(error, data) {

            function europe(bubbleSize, bubbleForward, bubbleMidfielder, bubbleDefender, bubbleGoalkeeper) {

                g.selectAll("circle")
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function(d) {
                        return projection([d.Longitude, d.Latitude])[0];
                    })
                    .attr("cy", function(d) {
                        return projection([d.Longitude, d.Latitude])[1];
                    })
                    .attr("fill", function(d) {

                        if (d.Position == bubbleForward) {
                            return "#e74c3c"
                        } else if (d.Position == bubbleMidfielder) {
                            return "#2ecc71"
                        } else if (d.Position == bubbleDefender) {
                            return "#f1c40f"
                        } else if (d.Position == bubbleGoalkeeper) {
                            return "#3498db"
                        }

                    })
                    .attr("visibility", function(d) {
                        if (d.Position == bubbleForward) {
                            return ""
                        } else if (d.Position == bubbleMidfielder) {
                            return ""
                        } else if (d.Position == bubbleDefender) {
                            return ""
                        } else if (d.Position == bubbleGoalkeeper) {
                            return ""
                        } else {
                            return "hidden"
                        }
                    })
                    .on("mouseover", tip.show)
                    .on("mouseout", tip.hide)
                    .attr("opacity", 0.7)
                    .attr("r", function(d) {
                        if (bubbleSize == "Appearances") {
                            return (d.Appearances * 0.071)
                        } else if (bubbleSize == "Goals") {
                            return (d.Goals * 0.3)
                        }
                    })
            }

            function svgDotsRemove() {
                svg.selectAll("circle").remove()
            }

            europe("Appearances", "Forward", "Midfielder", "Defender", "Goalkeeper");

            d3.select("#positionSelector").selectAll("input")
                .on("change", positionChange);

            function positionChange() {

                var radios = document.getElementsByName('position');

                for (var i = 0, length = radios.length; i < length; i++) {
                    if (radios[i].checked) {

                        svgDotsRemove()

                        if (radios[i].value == "Defender") {
                            europe("Appearances", null, null, "Defender", null);
                        } else if (radios[i].value == "Forward") {
                            europe("Appearances", "Forward", null, null, null);
                        } else if (radios[i].value == "All") {
                            europe("Appearances", "Forward", "Midfielder", "Defender", "Goalkeeper");
                        } else if (radios[i].value == "Midfielder") {
                            europe("Appearances", null, "Midfielder", null, null);
                        } else {
                            europe("Appearances", null, null, null, "Goalkeeper");
                        }

                        break;
                    }
                }
            }

        });

    })

    var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
            return "<span style='color:white'>" + "PlayerName:  " + d.PlayerName + "<br>Appearances:  " + d.Appearances + "<br>BirthPlace:  " + d.BirthPlace + "<br>Country:  " + d.Country /*+ "<br>Goals: " + d.Goals + "<br>Appearances: " + d.Appearances +"</span>";*/
        })

    var europeCountries = [
        "Austria", "Belgium", "Croatia", "Czechoslovakia", "CzechRepublic", "Denmark", "EastGermany", "England", "Estonia", "France", "Germany", "Greece", "Hungary", "Italy", "Luxembourg", "Netherlands", "NorthernIreland", "Poland", "Portugal", "Romania", "Russia", "Scotland", "Serbia", "Slovenia", "SovietUnion", "Spain", "Sweden", "Switzerland", "Ukraine", "Czechoslovakia", "MonteNegro", "Finland", "Norway", "MonteNegro"
    ]

    var europeColors = [
        "#F22613",
        "#96281B",
        "#9A12B3",
        "#DB0A5B",
        "#663399",
        "#9A12B3",
        "#674172",
        "#3498DB",
        "#8E44AD",
        "#9B59B6",
        "#C5EFF7",
        "#81CFE0", //
        "#5C97BF",
        "#87D37C",
        "#4ECDC4",
        "#26A65B",
        "#03C9A9",
        "#DCC6E0",
        "#2ECC71",
        "#F7CA18",
        "#E87E04",
        "#DCC6E0",
        "#F9690E",
        "#F22613",
        "#F22613",
        "#F22613",
        "#26A65B",
        "#F39C12",
        "#1BA39C",
        "#F89406",
        "#F39C12",
        "#F27935",
        "#ECF0F1",
        "#ECF0F1",
        "#26A65B"
    ]

    d3.json("../viz/europe.json", function(error, map) {

        var width = 900;
        var height = 730;

        var projection = d3.geo.albers()
            .scale(1100)
            .translate([width / 2, height / 2])
            .rotate([-17.0333, 0])
            .center([0, 51.1167])

        var svg = d3.select("body").select("#europemap1").append("svg")
            .attr("width", width)
            .attr("height", height);

        var g = svg.append("g");

        g.append("path")
            .datum(topojson.feature(map, map.objects.layer1))
            .attr("d", d3.geo.path().projection(projection));

        // load and display the cities
        d3.csv("../viz/europe-data.csv", function(error, data) {
            g.selectAll("circle")
                .data(data)
                .enter()
                .append("circle")
                .attr("cx", function(d) {
                    return projection([d.Longitude, d.Latitude])[0]
                })
                .attr("cy", function(d) {
                    return projection([d.Longitude, d.Latitude])[1]
                })
                .attr("r", function(d) {
                    return (d.Appearances * 0.035)
                        //return (d.Height)
                })
                .attr("fill", function(d) {
                    for (i = 0; i < 34; i++) {
                        if (d.Country == europeCountries[i]) {
                            return europeColors[i]
                        } else {}
                    }
                })
                .attr("opacity", 1)
                .attr("visibility", function(d) {
                    if (d.Country == "Turkey") {
                        return "hidden"
                    } else {
                        return ""
                    }
                })
                //.on("mouseover", tip.show)
                //.on("mouseout", tip.hide);

        });

    })

    d3.json("../viz/europe.json", function(error, map) {

        var width = 900;
        var height = 730;

        var projection = d3.geo.albers()
            .scale(1100)
            .translate([width / 2, height / 2])
            .rotate([-17.0333, 0])
            .center([0, 51.1167])

        var svg = d3.select("body").select("#europemaptime").append("svg")
            .attr("width", width)
            .attr("height", height);

        var g = svg.append("g");

        g.append("path")
            .datum(topojson.feature(map, map.objects.layer1))
            .attr("d", d3.geo.path().projection(projection));

        var sliceCounter = [1871, 0, 1872, 3, 1872.5, 5, 1873, 8, 1874, 10, 1875, 13, 1875.5, 14, 1876, 15, 1876.5, 16, 1877, 19, 1877.5, 20, 1878, 21, 1878.5, 24, 1879, 32, 1879.5, 33, 1880, 37, 1880.5, 38, 1881, 42, 1881.5, 44, 1882, 51, 1882.5, 52, 1883, 60, 1883.5, 62, 1884, 69, 1885, 72, 1885.5, 75, 1886, 85, 1887, 90, 1887.5, 95, 1888, 104, 1888.5, 110, 1889, 124, 1889.5, 129, 1890, 138, 1890.5, 144, 1891, 154, 1891.5, 156, 1892, 167, 1892.5, 169, 1893, 177, 1893.5, 185, 1894, 195, 1894.5, 199, 1895, 208, 1895.5, 210, 1896, 217, 1896.5, 220, 1897, 229, 1897.5, 231, 1898, 245, 1898.5, 248, 1899, 253, 1899.5, 254, 1900, 261, 1900.5, 264, 1901, 273, 1901.5, 276, 1902, 289, 1902.5, 291, 1903, 300, 1903.5, 302, 1904, 314, 1904.5, 317, 1905, 327, 1905.5, 328, 1906, 343, 1906.5, 353, 1907, 362, 1907.5, 368, 1908, 382, 1908.5, 388, 1909, 399, 1909.5, 403, 1910, 424, 1910.5, 429, 1911, 436, 1911.5, 442, 1912, 464, 1912.5, 473, 1913, 489, 1913.5, 499, 1914, 511, 1914.5, 512, 1915, 516, 1915.5, 523, 1916, 526, 1916.5, 531, 1917, 538, 1917.5, 544, 1918, 546, 1918.5, 549, 1919, 556, 1919.5, 559, 1920, 574, 1920.5, 583, 1921, 608, 1921.5, 619, 1922, 641, 1922.5, 666, 1923, 693, 1923.5, 705, 1924, 742, 1924.5, 762, 1925, 791, 1925.5, 808, 1926, 843, 1926.5, 855, 1927, 885, 1927.5, 903, 1928, 928, 1928.5, 949, 1929, 980, 1929.5, 998, 1930, 1029, 1930.5, 1056, 1931, 1088, 1931.5, 1115, 1932, 1152, 1932.5, 1176, 1933, 1220, 1933.5, 1244, 1934, 1280, 1934.5, 1308, 1935, 1345, 1935.5, 1377, 1936, 1419, 1936.5, 1443, 1937, 1475, 1937.5, 1498, 1938, 1532, 1938.5, 1547, 1939, 1579, 1939.5, 1587, 1940, 1616, 1940.5, 1627, 1941, 1650, 1941.5, 1665, 1942, 1687, 1942.5, 1699, 1943, 1705, 1943.5, 1715, 1944, 1722, 1944.5, 1729, 1945, 1744, 1945.5, 1752, 1946, 1770, 1946.5, 1781, 1947, 1803, 1947.5, 1825, 1948, 1856, 1948.5, 1877, 1949, 1915, 1949.5, 1938, 1950, 1978, 1950.5, 1999, 1951, 2031, 1951.5, 2058, 1952, 2110, 1952.5, 2147, 1953, 2182, 1953.5, 2201, 1954, 2247, 1954.5, 2280, 1955, 2331, 1955.5, 2365, 1956, 2423, 1956.5, 2449, 1957, 2496, 1957.5, 2526, 1958, 2575, 1958.5, 2601, 1959, 2645, 1959.5, 2669, 1960, 2718, 1960.5, 2754, 1961, 2808, 1961.5, 2838, 1962, 2883, 1962.5, 2912, 1963, 2951, 1963.5, 2981, 1964, 3026, 1964.5, 3054, 1965, 3101, 1965.5, 3133, 1966, 3180, 1966.5, 3209, 1967, 3259, 1967.5, 3291, 1968, 3339, 1968.5, 3370, 1969, 3413, 1969.5, 3440, 1970, 3481, 1970.5, 3507, 1971, 3574, 1971.5, 3607, 1972, 3658, 1972.5, 3691, 1973, 3733, 1973.5, 3770, 1974, 3823, 1974.5, 3863, 1975, 3916, 1975.5, 3950, 1976, 4016, 1976.5, 4054, 1977, 4109, 1977.5, 4162, 1978, 4214, 1978.5, 4254, 1979, 4294, 1979.5, 4339, 1980, 4400, 1980.5, 4439, 1981, 4499, 1981.5, 4542, 1982, 4584, 1982.5, 4625, 1983, 4679, 1983.5, 4727, 1984, 4792, 1984.5, 4828, 1985, 4882, 1985.5, 4917, 1986, 4973, 1986.5, 5017, 1987, 5075, 1987.5, 5122, 1988, 5197, 1988.5, 5237, 1989, 5302, 1989.5, 5343, 1990, 5412, 1990.5, 5463, 1991, 5546, 1991.5, 5599, 1992, 5696, 1992.5, 5752, 1993, 5852, 1993.5, 5920, 1994, 6031, 1994.5, 6102, 1995, 6218, 1995.5, 6290, 1996, 6383, 1996.5, 6456, 1997, 6553, 1997.5, 6615, 1998, 6717, 1998.5, 6784, 1999, 6903, 1999.5, 6976, 2000, 7067, 2000.5, 7131, 2001, 7223, 2001.5, 7290, 2002, 7421, 2002.5, 7481, 2003, 7600, 2003.5, 7691, 2004, 7797, 2004.5, 7880, 2005, 8006, 2005.5, 8083, 2006, 8193, 2006.5, 8270, 2007, 8370, 2007.5, 8441, 2008, 8559, 2008.5, 8633, 2009, 8766, 2009.5, 8867, 2010, 9005, 2010.5, 9138, 2011, 9297, 2011.5, 9436, 2012, 9631, 2012.5, 9762, 2013, 9948, 2013.5, 10099]

        var Counter = 1;

        // load and display the cities
        d3.csv("../viz/europe-data-year-sorted-min.csv", function(error, data) {

            var reset = "false"

            function europeTime(interval, k, j) {

                var svg = d3.select("body").select("#europemaptime").select("svg")
                    .attr("width", width)
                    .attr("height", height);

                var g = svg.append("g");

                var datanew = data.slice(k, j)

                d3.select("body").select("#timer1")
                    .data(datanew)
                    .text(function(d) {
                        var str = d.MeanYear;
                        if (str.indexOf(".") > -1) {
                            str = str.substring(0, str.length - 2);
                        }
                        return str
                    })

                g.selectAll("circle")
                    .data(datanew)
                    .enter()
                    .append("circle")
                    .attr("cx", function(d) {
                        return projection([d.Longitude, d.Latitude])[0]
                    })
                    .attr("cy", function(d) {
                        return projection([d.Longitude, d.Latitude])[1]
                    })
                    .attr("r", 2.5)
                    /*function(d) { 
                              if (d.Appearances < 50 ) {
                                return (d.Appearances*0.15)
                              }
                              else if (d.Appearances > 50 && d.Appearances < 80) {
                                return d.Appearances*0.11
                              }
                              else {
                                return d.Appearances*0.09
                              }
                                //return (d.Height)
                            })*/
                    //.attr("fill", "#95c7ec")
                    .attr("fill", function(d) {
                        if (d.Position == "Forward") {
                            return "#e74c3c"
                        } else if (d.Position == "Midfielder") {
                            return "#2ecc71"
                        } else if (d.Position == "Defender") {
                            return "#f1c40f"
                        } else if (d.Position == "Goalkeeper") {
                            return "#3498db"
                        } else {
                            return "#e74c3c"
                        }
                    })
                    .attr("opacity", 0.7)
                    .attr("visibility", function(d) {
                        if (d.Country == "Turkey") {
                            return "hidden"
                        } else {
                            return ""
                        }
                    })
                    //.on("mouseover", tip.show)
                    //.on("mouseout", tip.hide);

                if (sliceCounter[Counter] < 10100) {
                    //setInterval(svgDotsRemoveMap(), 5000);
                    setTimeout(
                        function() {
                            //console.log(k)
                            //console.log(reset)
                            if (reset == "false") {
                                Counter = Counter + 2;
                                //j = k+sliceCounter[k+1];
                                europeTime(500, sliceCounter[Counter], sliceCounter[Counter + 2]
                                        //k+20
                                    )
                                    //g.selectAll("circle").remove()
                            } else {
                                Counter = 0;
                            }
                        }, 50)

                }

            }

            d3.select('#europeMapRun').on('click', function() {
                reset = "false"
                europeTime(500, sliceCounter[1], sliceCounter[3])
            });

            d3.select('#europeMapReset').on('click', function() {
                reset = "true"
                Counter = 0;
                d3.select("body").select("#europemaptime").selectAll("circle").remove()
                d3.select("body").select("#timer1")
                    .style('font-size', function(d) {
                        return "90px"
                    })
                    .text("1871")
            });

        });

    })

    d3.json("../viz/world-110m2.json", function(error, map) {

        var width = 1000,
            height = 600;

        var sliceCounter = [1871, 0, 1872, 3, 1872.5, 5, 1873, 8, 1874, 10, 1875, 13, 1875.5, 14, 1876, 15, 1876.5, 16, 1877, 19, 1877.5, 20, 1878, 21, 1878.5, 24, 1879, 32, 1879.5, 33, 1880, 37, 1880.5, 38, 1881, 42, 1881.5, 44, 1882, 51, 1882.5, 52, 1883, 60, 1883.5, 62, 1884, 69, 1885, 72, 1885.5, 75, 1886, 85, 1887, 90, 1887.5, 95, 1888, 104, 1888.5, 110, 1889, 124, 1889.5, 129, 1890, 138, 1890.5, 144, 1891, 154, 1891.5, 156, 1892, 167, 1892.5, 169, 1893, 177, 1893.5, 185, 1894, 195, 1894.5, 199, 1895, 208, 1895.5, 210, 1896, 217, 1896.5, 220, 1897, 229, 1897.5, 231, 1898, 245, 1898.5, 248, 1899, 253, 1899.5, 254, 1900, 261, 1900.5, 264, 1901, 273, 1901.5, 276, 1902, 289, 1902.5, 291, 1903, 300, 1903.5, 302, 1904, 315, 1904.5, 318, 1905, 328, 1905.5, 329, 1906, 344, 1906.5, 354, 1907, 364, 1907.5, 371, 1908, 385, 1908.5, 393, 1909, 404, 1909.5, 409, 1910, 431, 1910.5, 436, 1911, 445, 1911.5, 451, 1912, 474, 1912.5, 484, 1913, 500, 1913.5, 510, 1914, 522, 1914.5, 524, 1915, 529, 1915.5, 536, 1916, 541, 1916.5, 548, 1917, 556, 1917.5, 564, 1918, 566, 1918.5, 570, 1919, 579, 1919.5, 584, 1920, 601, 1920.5, 611, 1921, 638, 1921.5, 649, 1922, 674, 1922.5, 699, 1923, 737, 1923.5, 749, 1924, 791, 1924.5, 814, 1925, 862, 1925.5, 881, 1926, 918, 1926.5, 937, 1927, 978, 1927.5, 1004, 1928, 1038, 1928.5, 1064, 1929, 1103, 1929.5, 1124, 1930, 1195, 1930.5, 1225, 1931, 1261, 1931.5, 1293, 1932, 1336, 1932.5, 1363, 1933, 1412, 1933.5, 1439, 1934, 1493, 1934.5, 1523, 1935, 1569, 1935.5, 1602, 1936, 1653, 1936.5, 1680, 1937, 1718, 1937.5, 1743, 1938, 1783, 1938.5, 1803, 1939, 1841, 1939.5, 1849, 1940, 1887, 1940.5, 1899, 1941, 1924, 1941.5, 1942, 1942, 1968, 1942.5, 1982, 1943, 1991, 1943.5, 2001, 1944, 2011, 1944.5, 2019, 1945, 2039, 1945.5, 2050, 1946, 2073, 1946.5, 2091, 1947, 2117, 1947.5, 2145, 1948, 2181, 1948.5, 2204, 1949, 2249, 1949.5, 2279, 1950, 2328, 1950.5, 2356, 1951, 2397, 1951.5, 2427, 1952, 2481, 1952.5, 2529, 1953, 2569, 1953.5, 2595, 1954, 2652, 1954.5, 2691, 1955, 2762, 1955.5, 2806, 1956, 2880, 1956.5, 2916, 1957, 2971, 1957.5, 3011, 1958, 3074, 1958.5, 3108, 1959, 3166, 1959.5, 3201, 1960, 3264, 1960.5, 3306, 1961, 3371, 1961.5, 3419, 1962, 3471, 1962.5, 3514, 1963, 3562, 1963.5, 3603, 1964, 3661, 1964.5, 3695, 1965, 3758, 1965.5, 3798, 1966, 3865, 1966.5, 3904, 1967, 3967, 1967.5, 4012, 1968, 4083, 1968.5, 4129, 1969, 4195, 1969.5, 4243, 1970, 4311, 1970.5, 4355, 1971, 4437, 1971.5, 4485, 1972, 4549, 1972.5, 4598, 1973, 4675, 1973.5, 4726, 1974, 4804, 1974.5, 4861, 1975, 4938, 1975.5, 4991, 1976, 5068, 1976.5, 5122, 1977, 5202, 1977.5, 5276, 1978, 5358, 1978.5, 5422, 1979, 5492, 1979.5, 5559, 1980, 5660, 1980.5, 5718, 1981, 5811, 1981.5, 5879, 1982, 5945, 1982.5, 6008, 1983, 6092, 1983.5, 6159, 1984, 6263, 1984.5, 6331, 1985, 6421, 1985.5, 6484, 1986, 6582, 1986.5, 6654, 1987, 6750, 1987.5, 6832, 1988, 6969, 1988.5, 7047, 1989, 7160, 1989.5, 7231, 1990, 7351, 1990.5, 7433, 1991, 7571, 1991.5, 7661, 1992, 7816, 1992.5, 7920, 1993, 8082, 1993.5, 8190, 1994, 8358, 1994.5, 8467, 1995, 8659, 1995.5, 8796, 1996, 8971, 1996.5, 9116, 1997, 9295, 1997.5, 9406, 1998, 9593, 1998.5, 9715, 1999, 9940, 1999.5, 10101, 2000, 10290, 2000.5, 10421, 2001, 10633, 2001.5, 10779, 2002, 11004, 2002.5, 11136, 2003, 11382, 2003.5, 11548, 2004, 11763, 2004.5, 11912, 2005, 12163, 2005.5, 12312, 2006, 12534, 2006.5, 12685, 2007, 12910, 2007.5, 13066, 2008, 13307, 2008.5, 13478, 2009, 13727, 2009.5, 13927, 2010, 14195, 2010.5, 14492, 2011, 14862, 2011.5, 15162, 2012, 15558, 2012.5, 15912, 2013, 16288, 2013.5, 16556]

        var gCounter = 1871;
        var Counter = 1;

        // load and display the cities
        d3.csv("../viz/data-year-sorted-min.csv", function(error, data) {

            var projection = d3.geo.mercator()
                .scale(172)
                .translate([width / 2, height / 2])
                .rotate([0, 0])
                .center([0, 25])

            var svg = d3.select("body").select("#worldmaptime").append("svg")
                .attr("width", width)
                .attr("height", height);

            var g = svg.append("g");

            g.append("path")
                .datum(topojson.feature(map, map.objects.countries))
                .attr("d", d3.geo.path().projection(projection));

            var reset = "false"

            function europeTime(interval, k, j) {

                var svg = d3.select("body").select("#worldmaptime").select("svg")
                    .attr("width", width)
                    .attr("height", height);

                var g = svg.append("g");

                var datanew = data.slice(k, j)

                d3.select("body").select("#timer")
                    .data(datanew)
                    .text(function(d) {
                        var str = d.MeanYear;
                        if (str.indexOf(".") > -1) {
                            str = str.substring(0, str.length - 2);
                        }
                        return str
                    })

                g.selectAll("circle")
                    .data(datanew)
                    .enter()
                    .append("circle")
                    .attr("cx", function(d) {
                        return projection([d.Longitude, d.Latitude])[0]
                    })
                    .attr("cy", function(d) {
                        return projection([d.Longitude, d.Latitude])[1]
                    })
                    .attr("r", 3)
                    /*
                              if (d.Appearances < 50 ) {
                                return (d.Appearances*0.13)
                              }
                              else if (d.Appearances > 50 && d.Appearances < 80) {
                                return d.Appearances*0.09
                              }
                              else {
                                return d.Appearances*0.07
                              }
                            })*/
                    .attr("fill", function(d) {
                        //return "#ecf0f1"
                        if (d.Position == "Forward") {
                            return "#e74c3c"
                        } else if (d.Position == "Midfielder") {
                            return "#2ecc71"
                        } else if (d.Position == "Defender") {
                            return "#f1c40f"
                        } else if (d.Position == "Goalkeeper") {
                            return "#3498db"
                        } else {
                            return "#e74c3c"
                        }
                    })
                    .attr("opacity", 0.7)

                //.on("mouseover", tip.show)
                //.on("mouseout", tip.hide);

                if (sliceCounter[Counter] < 16557) {
                    //setInterval(svgDotsRemoveMap(), 5000);
                    setTimeout(
                        function() {
                            //console.log(k)
                            //console.log(reset)
                            if (reset == "false") {
                                Counter = Counter + 2;
                                //j = k+sliceCounter[k+1];
                                europeTime(500, sliceCounter[Counter], sliceCounter[Counter + 2]
                                        //k+20
                                    )
                                    //g.selectAll("circle").remove()
                            } else {
                                Counter = 0;
                            }
                        }, 100)

                }

            }

            d3.select('#worldMapRun').on('click', function() {
                reset = "false"
                europeTime(500, sliceCounter[1], sliceCounter[3])
            });

            d3.select('#worldMapReset').on('click', function() {
                reset = "true"
                    //console.log(reset)
                d3.select("body").select("#worldmaptime").selectAll("circle").remove()
                Counter = 0;
                d3.select("body").select("#timer")
                    .style('font-size', function(d) {
                        return "90px"
                    })
                    .text("1871")
            });

        });

    })

    d3.csv("../viz/data.csv", function(error, data) {

        //  function ullala () {

        function barChart(barCountry, barPlayerPosition) {

            var countryData = data.slice(barCountry[0], barCountry[1])

            //console.log(barCountry[0])
            //console.log(barCountry[1])

            var max = d3.max(countryData, function(d) {
                if (d.MeanYear == 0 || d.Height == 0) {} else if (d.Position == barPlayerPosition) {
                    return d.MeanYear
                } else if (barPlayerPosition == "All") {
                    return d.MeanYear
                }
            })
            var min = d3.min(countryData, function(d) {
                if (d.MeanYear == 0 || d.Height == 0) {} else if (d.Position == barPlayerPosition) {
                    return d.MeanYear
                } else if (barPlayerPosition == "All") {
                    return d.MeanYear
                }
            })

            var maxHeight = d3.max(countryData, function(d) {
                if (d.MeanYear == 0 || d.Height == 0) {} else if (d.Position == barPlayerPosition) {
                    return d.Height
                } else if (barPlayerPosition == "All") {
                    return d.Height
                }
            })
            var minHeight = d3.min(countryData, function(d) {
                if (d.MeanYear == 0 || d.Height == 0) {} else if (d.Position == barPlayerPosition) {
                    return d.Height
                } else if (barPlayerPosition == "All") {
                    return d.Height
                }
            });

            //  console.log(maxHeight);
            //  console.log(minHeight)

            var margin = {
                    top: 40,
                    right: 20,
                    bottom: 30,
                    left: 40
                },
                width = 860 - margin.left - margin.right,
                height = 250 - margin.top - margin.bottom;

            var x = d3.scale.linear()
                .range([0, width]);

            var y = d3.scale.linear()
                .range([height, 0]);

            var xAxis = d3.svg.axis()
                .scale(x)
                .orient("bottom");

            var yAxis = d3.svg.axis()
                .scale(y)
                .orient("left");

            var tip = d3.tip()
                .attr('class', 'd3-tip')
                .offset([-10, 0])
                .html(function(d) {
                    return "<span style='color:white'>" + d.Country + "    " + d.MeanYear + "  " + d.Height + "</span>";
                })

            var svg = d3.select("body").select("#line").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            svg.call(tip);

            x.domain([min - 7, 2020]);
            y.domain([minHeight - 0.08, maxHeight]);

            //x.domain([ 1.5, 2.3]);
            //y.domain([0, 150]);

            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis);

            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis)
                .append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 6)
                .attr("dy", ".71em")
                .style("text-anchor", "end")
                .text("Height");

            svg.selectAll(".bar")
                .data(function() {
                    return countryData;
                })
                .enter().append("rect")
                .attr("class", "bar")
                .attr("x", function(d) {
                    return x(d.MeanYear);
                })
                .attr("width", 40)
                .attr("y", function(d) {
                    return y(d.Height);
                })
                .attr("height", function(d) {
                    return height - y(d.Height);
                })
                .attr("opacity", function(d) {
                    if (barCountry == "All") {
                        return 0.1
                    } else {
                        return 0.5
                    }
                })
                .attr("visibility", function(d) {
                    if (barPlayerPosition == "All") {
                        return ""
                    } else if (barPlayerPosition == "Forward") {
                        if (d.Position == "Forward") {
                            return ""
                        } else {
                            return "hidden"
                        }
                    } else if (barPlayerPosition == "Defender") {
                        if (d.Position == "Defender") {
                            return ""
                        } else {
                            return "hidden"
                        }
                    } else if (barPlayerPosition == "Midfielder") {
                        if (d.Position == "Midfielder") {
                            return ""
                        } else {
                            return "hidden"
                        }
                    } else if (barPlayerPosition == "Goalkeeper") {
                        if (d.Position == "Goalkeeper") {
                            return ""
                        } else {
                            return "hidden"
                        }
                    }
                })
                .attr("fill", function(d) {
                    if (d.Position == "Forward") {
                        return "#e74c3c"
                    } else if (d.Position == "Defender") {
                        return "#f1c40f"
                    } else if (d.Position == "Midfielder") {
                        return "#2ecc71"
                    } else if (d.Position == "Goalkeeper") {
                        return "#3498db"
                    }
                })
                .on('mouseover', tip.show)
                .on('mouseout', tip.hide)

        }

        barChart(Germany, "Defender")

        function countryBarChange() {
            valueCountrya = eval(this.value);
            // console.log(valueCountrya)

            var radios = document.getElementsByName('positionBarChart');

            for (var i = 0, length = radios.length; i < length; i++) {
                if (radios[i].checked) {
                    // do whatever you want with the checked radio
                    svgBarsRemove()
                    barChart(
                        //radios[i].value, 
                        valueCountrya, radios[i].value);
                    // console.log(valueCountrya)
                    // only one radio can be logically checked, don't check the rest
                    break;
                }
            }

        }

        function svgBarsRemove() {
            d3.select("body").select("#line").select("svg").remove()
        }

        d3.select("#countrySelectorBarChart").selectAll("input")
            .on("change", countryBarChange);

        d3.select("#positionBarChartSelector").selectAll("input")
            .on("change", sizeChange);

        var valueCountrya;
        var valueSize;

        function sizeChange() {

            // console.log("y")
            valueSize = this.value;

            var radios = document.getElementsByName('countryBarChart');

            for (var i = 0, length = radios.length; i < length; i++) {
                if (radios[i].checked) {

                    svgBarsRemove()
                        // console.log(valueSize)

                    barChart(
                            //valueSize, eval(radios[i].value), "Forward", "Midfielder", "Defender", "Goalkeeper");
                            eval(radios[i].value), valueSize)
                        // only one radio can be logically checked, don't check the rest

                    break;
                }
            }
        }

    })

    d3.json("../viz/world-110m2.json", function(error, map) {

        var width = 1000,
            height = 600;

        var projection = d3.geo.mercator()
            .scale(172)
            .translate([width / 2, height / 2])
            .rotate([0, 0])
            .center([0, 25])

        var svg = d3.select("body").select("#worldmap").append("svg")
            .attr("width", width)
            .attr("height", height);

        var g = svg.append("g");

        g.append("path")
            .datum(topojson.feature(map, map.objects.countries))
            .attr("d", d3.geo.path().projection(projection));

        svg.call(tip);

        // load and display the cities
        d3.csv(
            //"../viz/latin-america-data.csv", 
            "../viz/latin-america-data.csv",
            function(error, data) {
                g.selectAll("circle")
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function(d) {
                        //if (d.Longitude > -29.727282 || d.Longitude <  -101.094470) {
                        //  if (d.Latitude > 22.134179 || d.Latitude < -58.339667)
                        //console.log(d.PlayerName)
                        //console.log(d.BirthPlace)
                        //  console.log(d.Country)
                        return projection([d.Longitude, d.Latitude])[0];
                        //}
                        //else {}

                    })
                    .attr("cy", function(d) {
                        //if (d.Longitude > -29.727282 || d.Longitude <  -101.094470) {
                        //  if (d.Latitude > 22.134179 || d.Latitude < -58.339667)
                        //console.log(d.PlayerName)
                        //console.log(d.BirthPlace)
                        return projection([d.Longitude, d.Latitude])[1];
                        //}
                        //else {}
                        //return projection([d.Longitude, d.Latitude])[1];
                    })
                    .attr("r", function(d) {
                        //if (bubbleSize == "Appearances") {
                        return (d.Appearances * 0.15)
                            //}
                            //else if (bubbleSize == "Goals") {
                            //  return (d.Goals*0.3)
                            //}
                    })
                    .attr("fill", function(d) {
                        return "#36D7B7"
                            /*if (d.Position == bubbleForward) { return "#e74c3c" }
                            else if (d.Position == bubbleMidfielder) { return "#2ecc71" }
                            else if (d.Position == bubbleDefender) { return "#f1c40f" }
                            else if (d.Position == bubbleGoalkeeper) { return "#3498db" }*/
                    })
                    /*.attr("visibility", function(d) { 
                      if (d.Position == bubbleForward) {  return "" }
                      else if (d.Position == bubbleMidfielder) {  return "" }
                      else if (d.Position == bubbleDefender) {  return "" }
                      else if (d.Position == bubbleGoalkeeper) {  return "" }
                      else { return "hidden" }})*/
                    .attr("opacity", 0.70)
                    .on("mouseover", tip.show)
                    .on("mouseout", tip.hide);

                // zoom and pan
                var zoom = d3.behavior.zoom()
                    .on("zoom", function() {
                        g.attr("transform", "translate(" +
                            d3.event.translate.join(",") + ")scale(" + d3.event.scale + ")");
                        g.selectAll("circle")
                            .attr("d", path.projection(projection));
                        g.selectAll("path")
                            .attr("d", path.projection(projection));

                    });

                //svg.call(zoom)

            });

    })

    d3.json("../viz/world-110m2.json", function(error, map) {

        var width = 1000,
            height = 600;

        var projection = d3.geo.mercator()
            .scale(172)
            .translate([width / 2, height / 2])
            .rotate([0, 0])
            .center([0, 25])

        var svg = d3.select("body").select("#worldmap2").append("svg")
            .attr("width", width)
            .attr("height", height);

        var g = svg.append("g");

        g.append("path")
            .datum(topojson.feature(map, map.objects.countries))
            .attr("d", d3.geo.path().projection(projection));

        svg.call(tip);

        // load and display the cities
        d3.csv("../viz/europe-data.csv", function(error, data) {
            g.selectAll("circle")
                .data(data)
                .enter()
                .append("circle")
                .attr("cx", function(d) {
                    //if (d.Longitude <  -14.590261) {
                    //  if (d.Latitude > 22.134179 || d.Latitude < -58.339667)
                    //console.log(d.PlayerName)
                    //console.log(d.BirthPlace)
                    //  console.log(d.Country)
                    return projection([d.Longitude, d.Latitude])[0];
                    //}
                    //else {}

                })
                .attr("cy", function(d) {
                    //if (d.Longitude <  -14.590261) {
                    //  if (d.Latitude > 22.134179 || d.Latitude < -58.339667)
                    //console.log(d.PlayerName)
                    //console.log(d.BirthPlace)
                    //  console.log(d.Country)
                    return projection([d.Longitude, d.Latitude])[1];
                    //}
                    //else {}
                    //return projection([d.Longitude, d.Latitude])[1];
                })
                .attr("r", function(d) {
                    //if (bubbleSize == "Appearances") {
                    return (d.Appearances * 0.12)
                        //}
                        //else if (bubbleSize == "Goals") {
                        //  return (d.Goals*0.3)
                        //}
                })
                .attr("fill", function(d) {
                    return "#36D7B7"
                        /*if (d.Position == bubbleForward) { return "#e74c3c" }
                        else if (d.Position == bubbleMidfielder) { return "#2ecc71" }
                        else if (d.Position == bubbleDefender) { return "#f1c40f" }
                        else if (d.Position == bubbleGoalkeeper) { return "#3498db" }*/
                })
                /*.attr("visibility", function(d) { 
                  if (d.Position == bubbleForward) {  return "" }
                  else if (d.Position == bubbleMidfielder) {  return "" }
                  else if (d.Position == bubbleDefender) {  return "" }
                  else if (d.Position == bubbleGoalkeeper) {  return "" }
                  else { return "hidden" }})*/
                .attr("opacity", 0.70)
                .on("mouseover", tip.show)
                .on("mouseout", tip.hide);

            // zoom and pan
            var zoom = d3.behavior.zoom()
                .on("zoom", function() {
                    g.attr("transform", "translate(" +
                        d3.event.translate.join(",") + ")scale(" + d3.event.scale + ")");
                    g.selectAll("circle")
                        .attr("d", path.projection(projection));
                    g.selectAll("path")
                        .attr("d", path.projection(projection));

                });

            //svg.call(zoom)

        });

    })
    </script>
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-53446145-1', 'auto');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
    </script>
    <!-- Custom Theme JavaScript -->
</body>

</html>
<style>
</style>

<body>